<?$a=$_SERVER['HTTP_USER_AGENT'];$b=explode('/',urldecode(ltrim($_SERVER['REQUEST_URI'],'/')));$c=array_shift($b);if($c==='fonts'){header('Content-Type: text/css; charset: utf-8');$d=d($a,array('Chrome','Firefox','Opera','Safari','MSIE','Trident'));$e=p(explode('&',array_shift($b)));foreach($e as $f){echo '@font-face {'.PHP_EOL;echo '  font-family: "'.$f['name'].'";'.PHP_EOL;echo '  font-style: '.$f['fontStyle'].';'.PHP_EOL;echo '  font-weight: '.$f['fontWeight'].';'.PHP_EOL;echo '  src: local("'.$f['name'].'"), local("'.$f['filename'].'"), url(http://static.9dev.de/files/fonts/'.$f['filename'].'/'.$f['filename'].'-'.$f['fontStyle'].'.'.$d['fileFormat'].') format("'.$d['fileFormat'].'");'.PHP_EOL;echo '  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;'.PHP_EOL;echo'}'.PHP_EOL;echo PHP_EOL.PHP_EOL;}}else if($c==='svg'){header('Content-Type: image/svg+xml');}else if($c==='files'){include('/files/'.array_shift($b));}else{echo 'invalid request.';}function p($g){$h=array();$i=array('normal','italic');foreach($g as $j){$k=explode('|',$j);$l=ucwords(strtolower($k[0]));$m=str_replace(' ','',$l);if(!empty($k[1])){foreach(explode(',',$k[1])as $n){$o=explode(':',$n);if(!in_array($o[0],$i)){echo '/* Requested style '.$o[0].' not available, falling back to normal */'.PHP_EOL;$p='normal';}else{$p=$o[0];}if($o[1]>900){echo '/* Requested weight '.$o[1].' is too high, falling back to 900 */'.PHP_EOL;$q=900;}else if($o[1]<100&&$o[1]>0){echo '/* Requested weight '.$o[1].' is too low, falling back to 100 */'.PHP_EOL;$q=100;}else if($o[1]==0){echo '/* No weight specified, falling back to 400 */'.PHP_EOL;$q=400;}else{$q=$o[1];}array_push($h,array('name'=>$l,'filename'=>$m,'fontStyle'=>$p,'fontWeight'=>$q));}}else{echo '/* No certain style requested, falling back to default */'.PHP_EOL;array_push($h,array('name'=>$l,'filename'=>$m,'fontStyle'=>'normal','fontWeight'=>'400'));}}return $h;}function d($a,$r){$s=array('browser'=>'n/a','version'=>0,'fileFormat'=>'woff');foreach($r as $t){if(strlen(stristr($a,$t))>0){preg_match('/'.$t.'\/([0-9]\.?[0-9])/',$a,$u);$s['browser']=$t;$s['version']=(string)$u[1];switch($s['browser']){case  'Chrome':if($s['version']>=36){$s['fileFormat']='woff2';}return $s;break;case  'MSIE':if($s['version']<9){$s['fileFormat']='eot';}return $s;break;case  'Trident':$s['browser']='MSIE';preg_match('/rv:([0-9]{1,2}\.?[0-9]{1,2})/',$a,$v);$s['version']=$v[1];break;default:$s['fileFormat']='woff';break;}}}return $s;}?>
